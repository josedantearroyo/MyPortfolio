---
import { Icon } from "astro-icon/components"

const TAGS = {
    NEXT:{
        name:"Next.js",
        class: "bg-black text-white",
        icon: "tabler:brand-nextjs",
    },
    TAILWIND:{
        name:"Tailwind CSS",
        class: "bg-teal-500 text-white",
        icon: "tabler:brand-tailwind",
    },
    REACT:{
        name:"React",
        class: "bg-blue-500 text-white",
        icon: "tabler:brand-react",
    },
    JAVASCRIPT:{
        name:"JavaScript",
        class: "bg-yellow-500 text-black",
        icon: "tabler:brand-javascript",
    },
    NODEJS:{
        name:"Node.js",
        class: "bg-green-600 text-white",
        icon: "tabler:brand-nodejs",
    },
    ASTRO:{
        name:"Astro",
        class: "bg-purple-600 text-white",
        icon: "tabler:rocket",
    },
}

const PROJECTS = [
    {
        title: "Kimsa Inventory",
        description: "Software de inventario y facturación para pequeñas y medianas empresas. Sistema completo con gestión de productos, clientes, proveedores y reportes.",
        link: "https://kimsainventory.com",
        github: "https://github.com/username/kimsa-inventory",
        tags: [TAGS.NEXT, TAGS.TAILWIND, TAGS.REACT],
        image: "/projects/kimsa-inventory.png",
    },
    {
        title: "E-commerce Platform",
        description: "Plataforma de comercio electrónico moderna con carrito de compras, pagos integrados y panel de administración.",
        link: "https://example-ecommerce.com",
        github: "https://github.com/username/ecommerce",
        tags: [TAGS.REACT, TAGS.NODEJS, TAGS.TAILWIND],
        image: "/projects/ecommerce.png",
    },
    {
        title: "Portfolio Web",
        description: "Portafolio personal desarrollado con Astro, con modo oscuro, animaciones y diseño responsive.",
        link: "https://portfolio.com",
        github: "https://github.com/username/portfolio",
        tags: [TAGS.ASTRO, TAGS.TAILWIND, TAGS.JAVASCRIPT],
        image: "/projects/portfolio.png",
    },
    {
        title: "Task Manager App",
        description: "Aplicación de gestión de tareas con funcionalidades de colaboración en tiempo real y notificaciones.",
        link: "https://taskmanager.com",
        github: "https://github.com/username/taskmanager",
        tags: [TAGS.NEXT, TAGS.REACT, TAGS.TAILWIND],
        image: "/projects/taskmanager.png",
    },
]
---

<div class="w-full mt-0">
    <!-- Título de la sección -->
    <div class="text-center mb-12">
        <h3 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mb-4">
            Proyectos Destacados
        </h3>
        <p class="text-lg text-gray-600 dark:text-gray-400">
            Mis proyectos desarrollados con tecnologías modernas.
        </p>
    </div>

    <!-- Grid responsive de proyectos -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-6 px-2 sm:px-0">
        {
            PROJECTS.map(({image, title, description, tags, link, github}) => (
                <article class="bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-xl transition-all duration-300 group mx-2 sm:mx-0">
                    <!-- Imagen del proyecto -->
                    <div class="relative h-44 lg:h-48 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-700 dark:to-gray-600 overflow-hidden">
                        <div class="absolute inset-0 flex items-center justify-center">
                            <Icon name="tabler:photo" class="w-12 h-12 text-gray-400 dark:text-gray-500" />
                        </div>
                        <!-- Overlay con enlaces -->
                        <div class="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center gap-3">
                            <a 
                                href={link} 
                                target="_blank" 
                                rel="noopener noreferrer"
                                class="bg-white/20 backdrop-blur-sm border border-white/30 text-white px-3 py-2 rounded-lg hover:bg-white/30 transition-all duration-200 flex items-center gap-2 text-sm"
                            >
                                <Icon name="tabler:external-link" class="w-4 h-4" />
                                Demo
                            </a>
                            <a 
                                href={github} 
                                target="_blank" 
                                rel="noopener noreferrer"
                                class="bg-white/20 backdrop-blur-sm border border-white/30 text-white px-3 py-2 rounded-lg hover:bg-white/30 transition-all duration-200 flex items-center gap-2 text-sm"
                            >
                                <Icon name="tabler:brand-github" class="w-4 h-4" />
                                Código
                            </a>
                        </div>
                    </div>

                    <!-- Contenido de la tarjeta -->
                    <div class="p-4 lg:p-5">
                        <!-- Título -->
                        <h4 class="text-lg lg:text-xl font-bold text-gray-900 dark:text-gray-100 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-200">
                            {title}
                        </h4>
                        
                        <!-- Descripción -->
                        <p class="text-gray-600 dark:text-gray-300 text-sm lg:text-base mb-3 line-clamp-2">
                            {description}
                        </p>

                        <!-- Tags -->
                        <div class="flex flex-wrap gap-1 lg:gap-1.5 mb-3">
                            {tags.map((tag) => (
                                <span class={`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${tag.class}`}>
                                    <Icon name={tag.icon} class="w-3 h-3" />
                                    {tag.name}
                                </span>
                            ))}
                        </div>

                        <!-- Enlaces -->
                        <div class="flex gap-2">
                            <a 
                                href={link} 
                                target="_blank" 
                                rel="noopener noreferrer"
                                class="flex-1 bg-blue-600 hover:bg-blue-700 text-white text-center py-2 px-3 rounded-lg transition-colors duration-200 text-sm font-medium"
                            >
                                Ver Proyecto
                            </a>
                            <a 
                                href={github} 
                                target="_blank" 
                                rel="noopener noreferrer"
                                class="bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 p-2 rounded-lg transition-colors duration-200"
                                title="Ver código en GitHub"
                            >
                                <Icon name="tabler:brand-github" class="w-4 h-4" />
                            </a>
                        </div>
                    </div>
                </article>
            ))
        }
    </div>
</div>

<style>
    /* Limitar texto a 2 líneas */
    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* Animación suave para las tarjetas */
    article {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    article:hover {
        transform: translateY(-4px);
    }

    /* Responsividad equilibrada */
    @media (max-width: 768px) {
        .grid {
            grid-template-columns: 1fr;
            gap: 1.5rem;
            padding: 0 0.5rem;
        }
        
        /* Mejores márgenes y espaciado en móviles */
        article {
            margin: 0 0.25rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        article:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    }

    @media (min-width: 768px) and (max-width: 1024px) {
        .grid {
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }
    }

    @media (min-width: 1024px) {
        .grid {
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }
    }

    /* Para pantallas muy grandes, mantener el tamaño moderado */
    @media (min-width: 1536px) {
        .grid {
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }
    }

    /* Mejoras específicas para pantallas muy pequeñas */
    @media (max-width: 375px) {
        .grid {
            padding: 0 0.25rem;
        }
        
        article {
            margin: 0 0.125rem;
        }
        
        .px-2 {
            padding-left: 0.25rem;
            padding-right: 0.25rem;
        }
    }
</style>