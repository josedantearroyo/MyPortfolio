---
import { Icon } from "astro-icon/components"

const EXPERIENCE = [
  {
    type: "work",
    title: "Desarrollador Full Stack",
    company: "Empresa Tech",
    period: "2023 - Presente",
    description: "Desarrollo de aplicaciones web con React, Next.js y Node.js. Implementación de sistemas de gestión empresarial y optimización de performance.",
    skills: ["React", "Next.js", "Node.js", "PostgreSQL"],
    icon: "tabler:briefcase"
  },
  {
    type: "work", 
    title: "Desarrollador Frontend",
    company: "Startup Digital",
    period: "2022 - 2023",
    description: "Creación de interfaces de usuario responsivas y optimizadas. Colaboración con equipos de diseño UX/UI.",
    skills: ["React", "TypeScript", "Tailwind CSS"],
    icon: "tabler:code"
  },
  {
    type: "work",
    title: "Desarrollador Junior",
    company: "Agencia Web",
    period: "2021 - 2022",
    description: "Desarrollo de sitios web corporativos y landing pages. Mantenimiento y actualización de aplicaciones existentes.",
    skills: ["HTML", "CSS", "JavaScript", "WordPress"],
    icon: "tabler:device-laptop"
  },
  {
    type: "work",
    title: "Freelancer",
    company: "Proyectos Independientes",
    period: "2020 - 2021",
    description: "Desarrollo de proyectos web para pequeñas empresas y emprendedores. Diseño y programación de soluciones personalizadas.",
    skills: ["PHP", "MySQL", "Bootstrap", "jQuery"],
    icon: "tabler:user"
  }
]
---

<!-- Sección de Experiencia y Educación -->
<div class="text-center px-4 sm:px-6 lg:px-8">
  <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 dark:text-gray-100 mb-4 sm:mb-6">
    Experiencia Profesional
  </h2>
  <p class="text-base sm:text-lg text-gray-600 dark:text-gray-400 mb-6 sm:mb-8 max-w-2xl mx-auto">
    Mi trayectoria profesional en el desarrollo de software
  </p>

  <!-- Timeline Container -->
  <div class="max-w-3xl mx-auto">
    <div class="relative">
      <!-- Línea vertical central (solo visible en desktop) -->
      <div class="hidden md:block absolute left-1/2 transform -translate-x-1/2 w-0.5 bg-blue-200 dark:bg-blue-800 h-full"></div>
      
      <!-- Timeline Items -->
      <div class="space-y-4 sm:space-y-6">
        {EXPERIENCE.map((item, index) => (
          <div class={`relative flex flex-col md:flex-row items-start md:items-center ${index % 2 === 0 ? 'md:flex-row-reverse' : ''}`}>
            <!-- Punto central (solo visible en desktop) -->
            <div class="hidden md:flex absolute left-1/2 transform -translate-x-1/2 w-3 h-3 bg-blue-500 rounded-full border-2 border-white dark:border-gray-900 z-10"></div>
            
            <!-- Card Container -->
            <div class={`w-full md:w-5/12 ${index % 2 === 0 ? 'md:pr-6' : 'md:pl-6'}`}>
              <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-4 sm:p-5 hover:shadow-lg transition-all duration-300 group">
                <!-- Header -->
                <div class="flex items-start gap-3 mb-3">
                  <div class="flex-shrink-0 w-8 h-8 sm:w-10 sm:h-10 rounded-lg flex items-center justify-center bg-blue-100 dark:bg-blue-900">
                    <Icon 
                      name={item.icon} 
                      class="w-4 h-4 sm:w-5 sm:h-5 text-blue-600 dark:text-blue-400" 
                    />
                  </div>
                  <div class="flex-1 min-w-0">
                    <h3 class="text-base sm:text-lg font-semibold text-gray-900 dark:text-gray-100 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
                      {item.title}
                    </h3>
                    <p class="text-sm text-blue-600 dark:text-blue-400 font-medium">
                      {item.company}
                    </p>
                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                      {item.period}
                    </p>
                  </div>
                </div>
                
                <!-- Description -->
                <p class="text-sm text-gray-600 dark:text-gray-300 mb-3 leading-relaxed">
                  {item.description}
                </p>
                
                <!-- Skills -->
                <div class="flex flex-wrap gap-1">
                  {item.skills.map((skill) => (
                    <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300">
                      {skill}
                    </span>
                  ))}
                </div>
              </div>
            </div>
            
            <!-- Spacer para mantener el layout en desktop -->
            <div class="hidden md:block w-5/12"></div>
          </div>
        ))}
      </div>
    </div>
  </div>
</div>

<style>
  /* Animaciones hover para las cards */
  .group:hover {
    transform: translateY(-2px);
  }

  /* Línea de tiempo responsive y optimizada */
  @media (max-width: 768px) {
    .space-y-4 {
      position: relative;
      padding-left: 2rem;
    }
    
    /* Línea vertical para móvil - más compacta */
    .space-y-4::before {
      content: '';
      position: absolute;
      left: 0.75rem;
      top: 0;
      bottom: 0;
      width: 2px;
      background: linear-gradient(to bottom, #3b82f6, #1d4ed8);
      opacity: 0.4;
    }
    
    /* Punto para móvil - más pequeño */
    .group::before {
      content: '';
      position: absolute;
      left: -1.75rem;
      top: 1rem;
      width: 8px;
      height: 8px;
      background: #3b82f6;
      border-radius: 50%;
      border: 2px solid white;
      z-index: 10;
    }
    
    .dark .group::before {
      border-color: rgb(17 24 39);
    }
  }

  /* Optimización para pantallas muy pequeñas */
  @media (max-width: 375px) {
    .p-4 {
      padding: 0.75rem;
    }
    
    .gap-3 {
      gap: 0.5rem;
    }
    
    .space-y-4 {
      padding-left: 1.5rem;
    }
  }

  /* Mejoras en la línea central para desktop */
  @media (min-width: 768px) {
    .w-0\.5 {
      background: linear-gradient(to bottom, transparent, #3b82f6 10%, #3b82f6 90%, transparent);
    }
  }

  /* Reducir altura de elementos innecesarios */
  .timeline-item {
    min-height: auto;
  }

  /* Espaciado más compacto */
  .space-y-4 > * + * {
    margin-top: 1rem;
  }

  @media (min-width: 640px) {
    .space-y-6 > * + * {
      margin-top: 1.5rem;
    }
  }
</style>